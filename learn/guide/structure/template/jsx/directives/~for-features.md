При работе с директивой цикла **~for** существуюте некоторые особенности:

1. Параметры цикла по умолчанию.

    ```info_md_hideicon
    Если при объявлении директивы **~for** не указать какие-либо параметры, то они будут созданы автоматически.
    ```

    К таким параметром относятся:

    1. **item** — значение элемента.
    1. **index** — индекс элемента.
    1. **items** — указатель на источник данных.
    1. **key** — имя свойства объекта или индекс массива.

    Например,

    ```javascript _run_edit_[my-component.js]
    ODA({
        is: 'my-component',
        template: `
            <div ~for="array">Индекс {{index}}- элемент[{{key}}]: {{item}} -- array: {{items}}</div>
        `,
        props: {
            array: ['A', 'B', 'C']
        }
    });
    ```

    В этом примере в директиве **~for** указано только одно имя источника данных, однако в теле элемента все переменные цикла **item**, **index**, **items** и **key** можно использовать, так как они были созданы автоматически.

1. Пересечение имен.

    ```info_md_hideicon
    Если компонент имеет внутренние свойства с такими же именами как у переменных цикла, то переменные цикла не будут создаваться автоматически. Вместо них будут использоваться заданные значения свойств компонента.
    ```

    Например,

    ```javascript _run_edit_[my-component.js]
    ODA({
        is: 'my-component',
        template: `
            <div ~for="item, index, items, key in array">Индекс {{index}}- элемент[{{key}}]: {{item}} -- array: {{items}}</div>
        `,
        props: {
            array: array: ['A', 'B', 'C'],
            item: 'ошибка',
            index: 'N',
            items: 'неправильная ссылка',
            key: 'error'
        }
    });
    ```

    Для использования стандартных переменных цикла в этом случае придется задавать для них другие имена.

    Например,

    ```javascript _run_edit_[my-component.js]
    ODA({
        is: 'my-component',
        template: `
            <div ~for="item1, index1, items1, key1 in array">Индекс {{index1}}- элемент[{{key1}}]: {{item1}} -- array: {{items1}}</div>
        `,
        props: {
            array: array: ['A', 'B', 'C'],
            item: 'ошибка',
            index: 'N',
            items: 'неправильная ссылка',
            key: 'error'
        }
    });
    ```

    В этом примере имена переменных цикла **item1**, **index1**, **items1** и **key1** уже не пересекаются с именам свойства самого компонента.

1. Строгий порядок следования параметров.

    ```info_md_hideicon
    Все параметры цикла необходимо указывать в строго определенном порядке: item**, **index**, **items** и **key**.
    ```

    Если необходимо переименовать какой-то из параметров отдельно, то все предыдущие параметры необходимо в директиве **~for** указать пустыми, отделив пустоты друг от друга запятыми.

    Например,

    ```javascript _run_edit_[my-component.js]
    ODA({
        is: 'my-component',
        template: `
            <div ~for=", , , prop in object">{{prop}}: {{item}}</div>
        `,
        props: {
            object: {
                prop1:'A', prop2:'B', prop3:'C'
            },
            key: 'Ключ'
        }
    });
    ```

    В данном примере приходится задать новое имя для параметра цикла **key**, так как только оно начинает пересекаться с одноименным свойством, заданным на уровне компонента. Однако в директиве **~for** этот параметр идет только четвертым. Он будет иметь новое имя **prop**, а все предыдущие параметры останутся с именами по умолчанию: **item**, **index** и **items**.

1. Ограниченная область видимости параметров.

    ```info_md_hideicon
    Область видимости параметров цикла ограничена HTML-элементом, в котором объявлена директива **~for**. На уровне компонента параметры цикла будут недоступны.
    ```

    Например,

    ```javascript _run_edit_[my-component.js]
    ODA({
        is: 'my-component',
        template: `
            <div ~for="array">Элемент[{{index}}}]: {{this.item}}</div>
        `,
        props: {
            array: ['A', 'B', 'C'],
        }
    });
    ```

    В этом примере происходит обращение к переменной цикла **item** через указатель на компонент **this**. Поскольку эта переменная на уровне компонента не определена, то ее значение внутри цикла окажется равной значению**undefined**.

1. Внешний доступ к параметрам цикла.

    ```info_md_hideicon
    Параметры цикла внешним элементам компонента недоступны.
    ```

    Если переменную цикла необходимо использовать за пределами HTML-элемента, в котором она объявлена, то ее придется передавать внешним элементам компонента в виде параметра.

    Например,

    ```javascript _run_edit_[my-component.js]
    ODA({
        is: 'my-component',
        template: `
            <div ~for="item, index, items, key in object">{{key}}: {{getItem(items,key)}}</div>
        `,
        props: {
            object: {
                prop1:'A', prop2:'B', prop3:'C'
            }
        },
        getItem(obj, prop) {
            return obj[prop];
        }
    });
    ```

    В этом примере текущее значение для директивы **~for** формируется методом **getItem**. В качестве параметров этому методу передаются источник данных из переменной **items** и имя текущего свойства из переменной **key**.

1. Обработка неопределенных элементов массивов.

    ```info_md_hideicon
    Директива **~for** обрабатывает все элементы из источника данных, даже если эти элементы неопределенны.
    ```

    Например,

    ```javascript _run_edit_[my-component.js]
    ODA({
        is: 'my-component',
        template: `
            <div ~for="array">Элемент[{{index}}]: {{item}}</div>
        `,
        props: {
            array: ['A', , 'C']
        }
    });
    ```

    В этом примере при объявлении массива **array** пропущен элемент с индексом **1**. Однако директива **~for** для него все равно создает очередной HTML-элемент **div**, и укажет в его теле значение **undefined**.

1. Пропуск неопределенных элементов массивов.

    ```info_md_hideicon
    Для исключения создания HTML-элементов для пропущенных элементов массива директиву **~for** необходимо совместно использовать с директивой **~if**, передавая ей неопределенное значение элемента **undefined** в качестве параметра.
    ```

    Например,

    ```javascript _run_edit_[my-component.js]
    ODA({
        is: 'my-component',
        template: `
            <div ~for="array" ~if="item">Элемент[{{index}}]: {{item}}</div>
        `,
        props: {
            array: ['A', , 'C']
        }
    });
    ```

    В этом пример компонент **div** для неопределенных элементов массива отображаться уже не будет, так как он после создания будет удален из документа директивой **~if** из-за того, что ее параметр для значения **undefined** будет фактически восприниматься как **false**.

1. Целочисленный источник данных.

    ```info_md_hideicon
    Если в качестве источника данных указать целочисленное значение, то директива **~for** будет воспринимать его как целочисленный массив, значения элементов которого начинаются с 1 и заканчиваются указанному значению.
    ```

    Например,

    ```javascript _run_edit_[my-component.js]
    ODA({
        is: 'my-component',
        template: `
            <div ~for="10">Элемент[{{index}}]: {{item}} – источник данных: [{{items}}]</div>
        `
    });
    ```

    В данном примере в качестве источника данных используется целое число. Оно будет автоматически преобразовано в массив состоящий из 10 чисел в диапазоне от 1 до 10 включительно. В результате этого директива **~for** создаст 10 однотипных элементов **div**, для каждого из этих десяти чисел.

1. Символьный источник данных.

    ```info_md_hideicon
    При использовании в качестве источника данных строку директива **~for** будет создавать новый HTML-элемент для каждого символа по отдельности, воспринимая строку как обычный массив символов.
    ```

    Например,

    ```javascript _run_edit_[my-component.js]
    ODA({
        is: 'my-component',
        template: `
            <div ~for="count">Элемент[{{index}}]: {{item}} – источник данных: [{{items}}]</div>
        `,
        props: {
            count: "Привет!"
        }
    });
    ```

    В данном примере будет создано семь HTML-элементов **div** для каждого символа строки **"Привет!"**.