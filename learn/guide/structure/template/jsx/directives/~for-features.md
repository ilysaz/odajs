При работе с директивой цикла **~for** существуют некоторые особенности:

1. Параметры цикла по умолчанию.

    ```info_md_hideicon
    Если при объявлении директивы **~for** не указать какие-либо параметры, то они будут созданы автоматически.
    ```

    К таким параметрам относятся:

    1. **item** — значение текущего элемента.
    1. **index** — индекс текущего элемента.
    1. **items** — указатель на источник данных.
    1. **key** — имя текущего свойства объекта или индекс массива.

    Например,

    ```javascript _run_edit_[my-component.js]
    ODA({
        is: 'my-component',
        template: `
            <div ~for="array">Индекс {{index}} - элемент[{{key}}]: {{item}} -- array: {{items}}</div>
        `,
        props: {
            array: ['A', 'B', 'C']
        }
    });
    ```

    В этом примере в директиве **~for** указано только одно имя источника данных, однако в теле элемента все параметры цикла **item**, **index**, **items** и **key** можно использовать так, как будто они были созданы в ручном режиме.

1. Пересечение имен.

    ```info_md_hideicon
    Если компонент имеет внутренние свойства с такими же именами, как и параметры цикла, то параметры цикла не будут создаваться автоматически. Вместо них будут использоваться заданные значения свойств компонента.
    ```

    Например,

    ```javascript _run_edit_[my-component.js]
    ODA({
        is: 'my-component',
        template: `
            <div ~for="item, index, items, key in array">Индекс {{index}} - элемент[{{key}}]: {{item}} -- array: {{items}}</div>
        `,
        props: {
            array: ['A', 'B', 'C'],
            item: 'ошибка',
            index: 'N',
            items: 'неправильная ссылка',
            key: 'error'
        }
    });
    ```

    В этом случае для использования параметров цикла для них придется задавать нестандартные имена.

    Чтобы в приведенном примере избежать коллизии, для переменных цикла необходимо указать другие имена

    Например,

    ```javascript _run_edit_[my-component.js]
    ODA({
        is: 'my-component',
        template: `
            <div ~for="item1, index1, items1, key1 in array">Индекс {{index1}} - элемент[{{key1}}]: {{item1}} -- array: {{items1}}</div>
        `,
        props: {
            array: ['A', 'B', 'C'],
            item: 'ошибка',
            index: 'N',
            items: 'неправильная ссылка',
            key: 'error'
        }
    });
    ```

    В этом примере имена параметров цикла **item1**, **index1**, **items1** и **key1** уже не пересекаются с именам свойства самого компонента и пример будет работать правильно.

1. Присваивание нестандартных имен параметрам.

    ```info_md_hideicon
    Опущенным параметрам автоматически присваиваются имена **item**, **index**, **items** и **key** в соответствии с их местом в директиве **~for**.
    ```

    Если необходимо переименовать только отдельные параметры, то все параметры, идущие до них, также придется указать, оставив их имена пустыми.

    Например,

    ```javascript _run_edit_[my-component.js]
    ODA({
        is: 'my-component',
        template: `
            <div ~for=", , , prop in object">{{prop}}: {{item}}</div>
        `,
        props: {
            object: {
                prop1:'A', prop2:'B', prop3:'C'
            },
            key: 'Ключ'
        }
    });
    ```

    В данном примере приходится задать новое имя для параметра цикла **key**, так как только оно пересекается с одноименным свойством компонента. Однако в директиве **~for** этот параметр идет только четвертым. Поэтому новое имя параметра **prop** придется указать четвертым, оставив имена всех предыдущих параметров **item**, **index** и **items** пустыми.

1. Ограниченная область видимости параметров.

    ```info_md_hideicon
    Область видимости параметров цикла ограничена HTML-элементом, в котором объявлена директива **~for**. На уровне компонента к параметрам цикла обратиться будет нельзя.
    ```

    Например,

    ```javascript _run_edit_[my-component.js]
    ODA({
        is: 'my-component',
        template: `
            <div ~for="array">Элемент[{{index}}]: {{this.item}}</div>
        `,
        props: {
            array: ['A', 'B', 'C'],
        }
    });
    ```

    В этом примере происходит обращение к параметру цикла **item** через указатель на компонент **this**. Поскольку этот параметр на уровне компонента не определен, то его значение внутри цикла окажется равным значению **undefined**.

1. Внешний доступ к параметрам цикла.

    ```info_md_hideicon
    Параметры цикла внешним элементам компонента недоступны.
    ```

    Если параметр цикла необходимо использовать за пределами HTML-элемента, в котором он был объявлен, то его придется передавать внешним методам компонента, используя их список параметров.

    Например,

    ```javascript _run_edit_[my-component.js]
    ODA({
        is: 'my-component',
        template: `
            <div ~for="object">{{key}}: {{getItem(items,key)}}</div>
        `,
        props: {
            object: {
                prop1:'A', prop2:'B', prop3:'C'
            }
        },
        getItem(obj, prop) {
            return obj[prop];
        }
    });
    ```

    В этом примере текущее значение для директивы **~for** формируется методом **getItem**. В качестве параметров этому методу передаются параметры цикла  **items** и **key**. В результате этого метод получает возможность выполнять с ними любые действия.

1. Обработка неопределенных элементов массивов.

    ```info_md_hideicon
    Директива **~for** обрабатывает все элементы из источника данных, даже если эти элементы не определены.
    ```

    Например,

    ```javascript _run_edit_[my-component.js]
    ODA({
        is: 'my-component',
        template: `
            <div ~for="array">Элемент[{{index}}]: {{item}}</div>
        `,
        props: {
            array: ['A', , 'C']
        }
    });
    ```

    В этом примере при объявлении массива **array** пропущен элемент с индексом **1**. Однако директива ~for все равно создаст для него очередной HTML-элемент div и будет использовать в нем неопределенное значение **undefined** в качестве значения параметра цикла **item**.

1. Пропуск неопределенных элементов массивов.

    ```info_md_hideicon
    Для исключения создания HTML-элементов для пропущенных элементов массива директиву **~for** можно совместить с директивой **~if**, передавая ей неопределенное значение элемента **undefined** в качестве параметра.
    ```

    Например,

    ```javascript _run_edit_[my-component.js]
    ODA({
        is: 'my-component',
        template: `
            <div ~for="array" ~if="item">Элемент[{{index}}]: {{item}}</div>
        `,
        props: {
            array: ['A', , 'C']
        }
    });
    ```

    В этом примере элементы **div** для неопределенных элементов массива уже отображаться не будут, так как после их создания директива **~if** удалит их из документа. Это происходит потому, что ее параметр **undefined** будет восприниматься как значение **false**, при котором данный компонент отображаться на странице уже не должен.

1. Целочисленный источник данных.

    ```info_md_hideicon
    Если в качестве источника данных указать целочисленное значение, то директива **~for** автоматически преобразует его в массив целых чисел в диапазоне от 1 до заданного значения.
    ```

    Например,

    ```javascript _run_edit_[my-component.js]
    ODA({
        is: 'my-component',
        template: `
            <div ~for="10">Элемент[{{index}}]: {{item}} – источник данных: [{{items}}]</div>
        `
    });
    ```

    В данном примере источником данных выступает целое число. Оно будет автоматически преобразовано в массив из 10 целых чисел в диапазоне от 1 до 10 включительно. В результате этого директива **~for** создаст 10 однотипных элементов **div**, для каждого из этих десяти чисел.

    ```info_md_hideicon
    Директива **~for** не умеет самостоятельно преобразовывать вещественные числа в целые, поэтому она не создает никаких HTML-элементов, если в качестве источника данных указано вещественное число.
    ```

    Например,

    ```javascript _run_edit_[my-component.js]
    ODA({
        is: 'my-component',
        template: `
            <div ~for="10.5">Элемент[{{index}}]: {{item}} – источник данных: [{{items}}]</div>
        `
    });
    ```

    В этом примере ни одного элемента **div** создано не будет.

1. Символьный источник данных.

    ```info_md_hideicon
    При использовании строки в качестве источника данных, директива **~for** будет создавать новый HTML-элемент для каждого символа по отдельности, воспринимая их как отдельные элементы обычного массива.
    ```

    Например,

    ```javascript _run_edit_[my-component.js]
    ODA({
        is: 'my-component',
        template: `
            <div ~for="count">Элемент[{{index}}]: {{item}} – источник данных: [{{items}}]</div>
        `,
        props: {
            count: "Привет!"
        }
    });
    ```

    В данном примере будет создано семь HTML-элементов **div** для каждого символа строки **"Привет!"**.

<div style="position:relative;padding-bottom:48%; margin:10px">
    <iframe src="https://www.youtube.com/embed/GoEiwg_mkb0?start=0" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen
    	style="position:absolute;width:100%;height:100%;"></iframe>
</div>
