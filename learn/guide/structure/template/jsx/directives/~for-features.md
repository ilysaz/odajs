При работе с директивой цикла **~for** существуюте некоторые особенности:

1. Параметры цикла по умолчанию.

    ```info_md_hideicon
    Если при объявлении директивы **~for** не указать какие-либо параметры, то они будут созданы автоматически.
    ```

    К таким параметром относятся:

    1. **item** — значение текущего элемента.
    1. **index** — индекс текущего элемента.
    1. **items** — указатель на источник данных.
    1. **key** — имя текущего свойства объекта или индекс массива.

    Например,

    ```javascript _run_edit_[my-component.js]
    ODA({
        is: 'my-component',
        template: `
            <div ~for="array">Индекс {{index}} - элемент[{{key}}]: {{item}} -- array: {{items}}</div>
        `,
        props: {
            array: ['A', 'B', 'C']
        }
    });
    ```

    В этом примере в директиве **~for** указано только одно имя источника данных, однако в теле элемента все переменные цикла **item**, **index**, **items** и **key** можно использовать, так как они были созданы автоматически.

1. Пересечение имен.

    ```info_md_hideicon
    Если компонент имеет внутренние свойства с такими же именами как у переменных цикла, то переменные цикла не будут созданы. Вместо них будут использоваться заданные значения свойств компонента.
    ```

    Например,

    ```javascript _run_edit_[my-component.js]
    ODA({
        is: 'my-component',
        template: `
            <div ~for="item, index, items, key in array">Индекс {{index}} - элемент[{{key}}]: {{item}} -- array: {{items}}</div>
        `,
        props: {
            array: ['A', 'B', 'C'],
            item: 'ошибка',
            index: 'N',
            items: 'неправильная ссылка',
            key: 'error'
        }
    });
    ```

    В этом примере для создания содержимого **div**-элементов используются значения из свойств компонента, а не из переменных цикла.

    Чтобы в приведенном примере избежать коллизии, для переменных цикла необходимо указать другие имена 

    Например,

    ```javascript _run_edit_[my-component.js]
    ODA({
        is: 'my-component',
        template: `
            <div ~for="item1, index1, items1, key1 in array">Индекс {{index1}} - элемент[{{key1}}]: {{item1}} -- array: {{items1}}</div>
        `,
        props: {
            array: ['A', 'B', 'C'],
            item: 'ошибка',
            index: 'N',
            items: 'неправильная ссылка',
            key: 'error'
        }
    });
    ```

    В этом примере имена переменных цикла **item1**, **index1**, **items1** и **key1** уже не пересекаются с именами свойств самого компонента.

1. Присваивание нестандартных имен параметрам.

    ```info_md_hideicon
    Опущенным параметрам автоматически присваиваются имена **item**, **index**, **items** и **key** в соответствии с их местом в директиве **~for**.
    ```

    Если требуется переименовать отдельный параметр в директиве, то места объявления предыдущих параметров необходимо оставить пустыми, отделив пустоты друг от друга запятыми.

    Например,

    ```javascript _run_edit_[my-component.js]
    ODA({
        is: 'my-component',
        template: `
            <div ~for=", , , prop in object">{{prop}}: {{item}}</div>
        `,
        props: {
            object: {
                prop1:'A', prop2:'B', prop3:'C'
            },
            key: 'Ключ'
        }
    });
    ```

    В данном примере необходимо задать новое имя для четвертого параметра директивы, так как используемое по умолчанию имя **key** пересекается с одноименным свойством, заданным на уровне компонента. Поэтому четвертому параметру присвоено новое имя **prop**, а все предыдущие параметры остаются с именами по умолчанию: **item**, **index** и **items**.

1. Ограниченная область видимости параметров.

    ```info_md_hideicon
    Область видимости параметров цикла ограничена HTML-элементом, в котором объявлена директива **~for**. На уровне компонента параметры цикла будут недоступны.
    ```

    Например,

    ```javascript _run_edit_[my-component.js]
    ODA({
        is: 'my-component',
        template: `
            <div ~for="array">Элемент[{{index}}]: {{this.item}}</div>
        `,
        props: {
            array: ['A', 'B', 'C'],
        }
    });
    ```

    В этом примере происходит обращение к переменной цикла **item** через указатель на компонент **this**. Поскольку эта переменная на уровне компонента не определена, то ее значение внутри цикла окажется равной значению **undefined**.

1. Внешний доступ к параметрам цикла.

    ```info_md_hideicon
    Параметры цикла внешним элементам компонента недоступны.
    ```

    Если переменную цикла необходимо использовать за пределами HTML-элемента, в котором она объявлена, то ее придется передавать внешним элементам компонента в виде параметра.

    Например,

    ```javascript _run_edit_[my-component.js]
    ODA({
        is: 'my-component',
        template: `
            <div ~for="item, index, items, key in object">{{key}}: {{getItem(items,key)}}</div>
        `,
        props: {
            object: {
                prop1:'A', prop2:'B', prop3:'C'
            }
        },
        getItem(obj, prop) {
            return obj[prop];
        }
    });
    ```

    В этом примере текущее значение для директивы **~for** формируется методом **getItem**. В качестве параметров этому методу передаются источник данных из переменной **items** и имя текущего свойства из переменной **key**.

1. Обработка неопределенных элементов массивов.

    ```info_md_hideicon
    Директива **~for** обрабатывает все элементы из источника данных, даже если эти элементы неопределенны.
    ```

    Например,

    ```javascript _run_edit_[my-component.js]
    ODA({
        is: 'my-component',
        template: `
            <div ~for="array">Элемент[{{index}}]: {{item}}</div>
        `,
        props: {
            array: ['A', , 'C']
        }
    });
    ```

    В этом примере при объявлении массива **array** пропущен элемент с индексом **1**. Однако директива **~for** для него все равно создает очередной HTML-элемент **div**, и укажет в его теле значение **undefined**.

1. Пропуск неопределенных элементов массивов.

    ```info_md_hideicon
    Для исключения создания HTML-элементов для пропущенных элементов массива директиву **~for** необходимо использовать совместно с директивой **~if**, которая принимает текущий элемент данных в качестве параметра и отфильтровывает неопределенные значения.
    ```

    Например,

    ```javascript _run_edit_[my-component.js]
    ODA({
        is: 'my-component',
        template: `
            <div ~for="array" ~if="item">Элемент[{{index}}]: {{item}}</div>
        `,
        props: {
            array: ['A', , 'C']
        }
    });
    ```

    В этом пример компонент **div** для неопределенных элементов массива отображаться уже не будет, так как после создания он будет удален из документа директивой **~if**.

1. Целочисленный источник данных.

    ```info_md_hideicon
    Если в качестве источника данных указать положительное целочисленное значение, то директива **~for** будет воспринимать его как целочисленный массив, значения элементов которого начинаются с 1 и заканчиваются указанным значением.
    ```

    Например,

    ```javascript _run_edit_[my-component.js]
    ODA({
        is: 'my-component',
        template: `
            <div ~for="10">Элемент[{{index}}]: {{item}} – источник данных: [{{items}}]</div>
        `
    });
    ```

    В данном примере в качестве источника данных используется целое число. Оно будет автоматически преобразовано в массив состоящий из 10 чисел в диапазоне от 1 до 10 включительно. В результате этого директива **~for** создаст 10 однотипных элементов **div**, для каждого из этих десяти чисел.

    ```info_md_hideicon
    Директива **~for** не умеет самостоятельно преобразовывать вещественные числа в целые, поэтому она не создает никаких HTML-элементов, если в качестве источника данных указано вещественное число.
    ```

1. Символьный источник данных.

    ```info_md_hideicon
    Если использовать в качестве источника данных строку, директива **~for** будет создавать новый HTML-элемент для каждого символа по отдельности, воспринимая строку как обычный массив символов.
    ```

    Например,

    ```javascript _run_edit_[my-component.js]
    ODA({
        is: 'my-component',
        template: `
            <div ~for="count">Элемент[{{index}}]: {{item}} – источник данных: [{{items}}]</div>
        `,
        props: {
            count: "Привет!"
        }
    });
    ```

    В данном примере будет создано семь HTML-элементов **div** для каждого символа строки **"Привет!"**.

