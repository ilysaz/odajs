Кеширование методов основано на принципе, что если состояние компонента не изменилось, то и результат выполнения методов не изменится. Изменением состояния компонента считается изменение значений свойств, объявленных явно в прототипе компонента. Таким образом, контекстом выполнения метода условно можно считать совокупность значений всех свойств компонента независимо от использования их в коде метода.

Механизм кэширования работает следующим образом:

1. при первом выполнении метода возвращенное значение запоминается в кэше;

1. при последующих вызовах метода проверяется наличие изменений в значениях свойств компонента. Если изменений не произошло, то метод не выполняется, а значение берется из кэша. Если изменения произошли, расчет выполняется заново и новое значение опять запоминается в кэше.

```info_md
Все методы имеют один общий кэш. Любое изменение значений свойств компонента приводит к повторному выполнению всех методов.
```

```warning_md
С осторожностью изменяйте значения свойств компонента в методе, вызываемом при рендеринге web-страницы. Такое изменение очищает кэш методов и приводит к их выполнению при следующем рендеринге web-страницы.
```

Например:

```javascript_run_line_edit_[my-component.js]
ODA({
    is: 'my-component',
    template: `
        <div>Счетчик из метода: {{methodCount()}}</div>
    `,
    props: {
        count: 0,
    },
    methodCount() {
        return ++this.count;
    }
});
```

В примере видно, что изменение свойства **count** в методе **methodCount** приводит к очистке кэша методов и выполнению метода при каждом рендеринге страницы.

```info_md
Изменение состояния одного независимого компонента не влияет на очистку кэша методов другого независимого компонента.
```

Например:

```html run_line_edit_h=46_
<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>Welcome to ODA.js</title>
        <script type="module" src="https://cdn.jsdelivr.net/gh/odajs/oda-framework/oda.js"></script>
    </head>
    <body>
        <my-count></my-count>
        <my-time></my-time>
        <script type="module">
            ODA({
                is: 'my-time',
                template: `
                    <div>Время из метода: {{methodTime()}}</div>
                `,
                methodTime() {
                    var d = new Date();
                    return d.toLocaleTimeString() + '.' + d.getMilliseconds();
                }
            });

            ODA({
                is: 'my-count',
                template: `
                    <button @tap="++count">Счетчик: {{count}}</button>
                `,
                count: 0
            });
        </script>
    </body>
</html>
```

В примере время, выводимое компонентом **my-component**, не обновляется при нажатии на кнопку **Счетчик**, потому что состояние компонента не изменяется. Изменение состояния компонента **my-count** на него не влияет, так оба компонента взаимно независимые.

Если объединить несколько компонентов в одном компоненте, то кэш методов у них становится общим. Следовательно, изменение состояния любого из объединенных компонентов влияет на выполнение методов во всех остальных компонентах.

Например:

```javascript_run_line_edit_[my-component.js]_h=46_
ODA({
    is: 'my-component',
    template: `
        <my-change></my-change>
        <my-time></my-time>
    `
});

ODA({
    is: 'my-time',
    template: `
        <div>Время из метода: {{methodTime()}}</div>
    `,
    methodTime() {
        var d = new Date();
        return d.toLocaleTimeString() + '.' + d.getMilliseconds();
    }
});

ODA({
    is: 'my-change',
    template: `
        <input ::value="change">
    `,
    change: "Измени меня"
});
```

В примере изменение текста в строке ввода в компоненте **my-change** изменяет состояние всего компонента **my-component**, поэтому сбрасывается кэш методов в компоненте **my-time**, и время на странице обновляется.

Кэш методов становится общим также в случае включения одного компонента в состав другого.

Например:

```javascript_run_line_edit_[my-component.js]_h=46_
ODA({
    is: 'my-component',
    template: `
        <my-change></my-change>
        <div>Время из метода: {{methodTime()}}</div>
    `,
    methodTime() {
        var d = new Date();
        return d.toLocaleTimeString() + '.' + d.getMilliseconds();
    }
});

ODA({
    is: 'my-change',
    template: `
        <input ::value="change">
    `,
    change: "Измени меня"
});
```

В примере изменение текста в строке ввода в подчиненном компоненте **my-change** изменяет состояние всего компонента **my-component**, поэтому время на странице обновляется.

Кэш методов становится общим также в случае наследования компонентов.

Например:

```javascript_run_line_edit_[my-component.js]_h=46_
ODA({
    is: 'my-component',
    extends: 'my-change',
    template: `
        <div>Время из метода: {{methodTime()}}</div>
    `,
    methodTime() {
        var d = new Date();
        return d.toLocaleTimeString() + '.' + d.getMilliseconds();
    }
});

ODA({
    is: 'my-change',
    template: `
        <input ::value="change">
    `,
    change: "Измени меня"
});
```

В примере изменение текста в строке ввода в родительском компоненте **my-change** изменяет состояние всего компонента **my-component**, поэтому время на странице обновляется.

```info_md
Кэш методов становится общим и сбрасывается одновременно для всех компонентов, объединенных в одном компоненте, независимо от метода объединения.
```
